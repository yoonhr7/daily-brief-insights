# Gemini API 설정 가이드

## Gemini API Key 발급받기 (무료)

### 1. Google AI Studio 접속

https://aistudio.google.com/app/apikey

### 2. API Key 생성

1. **"Create API Key"** 클릭
2. Google 계정으로 로그인
3. **"Create API key in new project"** 선택
4. API Key가 생성됨 (예: `AIzaSyC...`)

### 3. API Key를 .env 파일에 추가

```bash
# .env 파일 열기
notepad .env
```

다음 내용 추가:
```
GEMINI_API_KEY=AIzaSyC_your_actual_api_key_here
```

## 무료 사용량

### Gemini Pro (우리가 사용하는 모델)

| 항목 | 무료 제한 |
|------|----------|
| 분당 요청 | 15 RPM |
| 일일 요청 | 1,500 RPM |
| 분당 토큰 | 100만 |
| 일일 토큰 | 1,500만 |

### 우리 프로젝트 예상 사용량

**하루 2회 실행 (오전 8시, 오후 8시)**:
- 경제 분석: 3개 주제 (환율, 금리, 증시)
- IT 분석: 3개 주제 (제품, 기술, 보안)
- **총 6회 API 호출/회 × 2회 = 12회/일**

✅ **결론: 무료 제한(1,500회/일) 내에서 충분히 사용 가능!**

## 테스트

API Key 설정 후 테스트:

```bash
npm run test:news
```

## 주의사항

1. **API Key 보안**
   - `.env` 파일은 Git에 커밋하지 마세요
   - `.gitignore`에 `.env`가 포함되어 있는지 확인

2. **무료 제한 초과 시**
   - 분당 15회 이상 요청하면 에러 발생
   - 하루 2회 실행으로는 문제없음

3. **API Key 재발급**
   - 노출되었다면 즉시 재발급
   - Google AI Studio에서 Delete → Create 새로 생성

## LLM 분석 방식

### 이전: 규칙 기반 (키워드 카운팅)
```
환율 관련 뉴스 15개 수집
→ '상승' 키워드 8개, '하락' 키워드 2개
→ 결론: "환율 상승"
```

### 현재: Gemini LLM 분석
```
환율 관련 뉴스 15개를 Gemini에게 전달
→ AI가 맥락을 이해하고 분석
→ 원인, 영향, 쉬운 설명까지 생성
```

### 장점
- ✅ 맥락 이해
- ✅ 새로운 이슈도 파악
- ✅ 자연스러운 설명 생성
- ✅ 무료! (일 1,500회 제한)

## 예상 결과

**분석 품질이 크게 향상됩니다:**

```
📌 환율 상승세, 1,400원 돌파 [연합뉴스·KBS·한경 등 15건]

미국 금리 인상 기조와 중동 지정학적 리스크가 복합적으로 작용하면서
원-달러 환율이 1,400원을 돌파했습니다. 수출 기업들에게는 유리하지만
수입 물가 상승 압력이 커질 것으로 전망됩니다.

💡 쉽게 이해하기

달러 환율이 오른다는 것은 우리나라 돈의 가치가 떨어진다는 뜻입니다.
해외여행 비용이 늘고 수입 제품 가격이 오르지만, 수출 기업들은
해외에서 번 돈을 원화로 바꿀 때 더 많이 받게 됩니다.
주로 미국 금리가 오르면서 투자자들이 달러를 선호하게 된 것이 원인입니다.
```

## 문제 해결

### API Key 에러
```
Error: GEMINI_API_KEY must be set
```
→ `.env` 파일에 `GEMINI_API_KEY` 추가했는지 확인

### 요청 제한 에러
```
Error: 429 Resource has been exhausted
```
→ 무료 제한 초과. 잠시 후 다시 시도

### 인터넷 연결 에러
```
Error: Failed to fetch
```
→ 인터넷 연결 확인
